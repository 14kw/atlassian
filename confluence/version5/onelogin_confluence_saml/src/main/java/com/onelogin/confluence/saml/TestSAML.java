package com.onelogin.confluence.saml;

import java.security.Principal;

import com.atlassian.user.User;

public class TestSAML {

	public static void main(String [] args){
		try{
			TestSAML ts = new TestSAML();
                        String s = "PHNhbWxwOlJlc3BvbnNlIHhtbG5zOnNhbWw9InVybjpvYXNpczpuYW1lczp0" +
"YzpTQU1MOjIuMDphc3NlcnRpb24iIHhtbG5zOnNhbWxwPSJ1cm46b2FzaXM6" +
"bmFtZXM6dGM6U0FNTDoyLjA6cHJvdG9jb2wiIElEPSJSYWFhODk5MzI3YzBl" +
"OGNhZDAxZjMwZmRhZjgxMWU1NTM3N2M5OTMzMCIgVmVyc2lvbj0iMi4wIiBJ" +
"c3N1ZUluc3RhbnQ9IjIwMTMtMTItMTlUMTc6MjQ6MDJaIiBEZXN0aW5hdGlv" +
"bj0iIj48c2FtbDpJc3N1ZXI+aHR0cHM6Ly9hcHAub25lbG9naW4uY29tL3Nh" +
"bWwvbWV0YWRhdGEvNDg0NDk8L3NhbWw6SXNzdWVyPjxzYW1scDpTdGF0dXM+" +
"PHNhbWxwOlN0YXR1c0NvZGUgVmFsdWU9InVybjpvYXNpczpuYW1lczp0YzpT" +
"QU1MOjIuMDpzdGF0dXM6U3VjY2VzcyIvPjwvc2FtbHA6U3RhdHVzPjxzYW1s" +
"OkFzc2VydGlvbiB4bWxuczp4cz0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9Y" +
"TUxTY2hlbWEiIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9Y" +
"TUxTY2hlbWEtaW5zdGFuY2UiIFZlcnNpb249IjIuMCIgSUQ9InBmeDI1NGNh" +
"OGJhLWEwMDktMTNmNS1iZjYyLWVmMTRiOGM3ODU2NyIgSXNzdWVJbnN0YW50" +
"PSIyMDEzLTEyLTE5VDE3OjI0OjAyWiI+PHNhbWw6SXNzdWVyPmh0dHBzOi8v" +
"YXBwLm9uZWxvZ2luLmNvbS9zYW1sL21ldGFkYXRhLzQ4NDQ5PC9zYW1sOklz" +
"c3Vlcj48ZHM6U2lnbmF0dXJlIHhtbG5zOmRzPSJodHRwOi8vd3d3LnczLm9y" +
"Zy8yMDAwLzA5L3htbGRzaWcjIj48ZHM6U2lnbmVkSW5mbz48ZHM6Q2Fub25p" +
"Y2FsaXphdGlvbk1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3Jn" +
"LzIwMDEvMTAveG1sLWV4Yy1jMTRuIyIvPjxkczpTaWduYXR1cmVNZXRob2Qg" +
"QWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcj" +
"cnNhLXNoYTEiLz48ZHM6UmVmZXJlbmNlIFVSST0iI3BmeDI1NGNhOGJhLWEw" +
"MDktMTNmNS1iZjYyLWVmMTRiOGM3ODU2NyI+PGRzOlRyYW5zZm9ybXM+PGRz" +
"OlRyYW5zZm9ybSBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAv" +
"MDkveG1sZHNpZyNlbnZlbG9wZWQtc2lnbmF0dXJlIi8+PGRzOlRyYW5zZm9y" +
"bSBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMTAveG1sLWV4" +
"Yy1jMTRuIyIvPjwvZHM6VHJhbnNmb3Jtcz48ZHM6RGlnZXN0TWV0aG9kIEFs" +
"Z29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI3No" +
"YTEiLz48ZHM6RGlnZXN0VmFsdWU+eFNiQUxjZ25idVk2SzdOZVp5V2ZuaFEv" +
"OFJnPTwvZHM6RGlnZXN0VmFsdWU+PC9kczpSZWZlcmVuY2U+PC9kczpTaWdu" +
"ZWRJbmZvPjxkczpTaWduYXR1cmVWYWx1ZT5JK3M2SitlVG5YakFVeUNTaXBy" +
"UEVITXUvSWwvOURGbnI4ZlF2RWZiMFh5SlNrNXEzM2ZWdU4yeFpGNkhuUkZv" +
"clk2ek5janZhTHBSSUFuZHlTdXozbUkwQkJ0RWZkc1NTcXJGRXhwRXVmRDZy" +
"NTZZY0c4U3owZnEyN1ZTNFN0QkhEWUY4ZS9wWkpyd2NKakhsb1A0Tk0wZmpL" +
"K0lyT2Q5QW0xN1ZpR3psRjJkb2VZL2JoaFNJNFB3bExxKzVkL1FsUUVyQlMr" +
"YW0vMUVnYWkxZTMwT1FvZHQxeHh4R0pIUzlHemRDclB6TlpaRHdvS1dQeGJG" +
"UjJJOVAzTTFwU0IxYzRSVnZHUmFlc3NyaVpWNEM3OUo1dWEyc2txeG1FMGxU" +
"eW1jRi9YUVFTVFp5QW8yMmdUc1VnZ3Y4OE56blFQMTZDOUhOY2F1NVVhUXFa" +
"Vlc4VW5ra3c9PTwvZHM6U2lnbmF0dXJlVmFsdWU+PGRzOktleUluZm8+PGRz" +
"Olg1MDlEYXRhPjxkczpYNTA5Q2VydGlmaWNhdGU+TUlJRUhUQ0NBd1dnQXdJ" +
"QkFnSVVVQTV6cXBUblNHRnIzLzZTMURUTDd3M0p0TXd3RFFZSktvWklodmNO" +
"QVFFRkJRQXdXakVMTUFrR0ExVUVCaE1DVlZNeEZ6QVZCZ05WQkFvTURrOXVa" +
"VXh2WjJsdUxDQkpibU11TVJVd0V3WURWUVFMREF4UGJtVk1iMmRwYmlCSlpG" +
"QXhHekFaQmdOVkJBTU1Fazl1WlV4dloybHVJRUZqWTI5MWJuUWdNVEFlRncw" +
"eE16RXlNVGd4TnpFNU1EQmFGdzB4T0RFeU1Ua3hOekU1TURCYU1Gb3hDekFK" +
"QmdOVkJBWVRBbFZUTVJjd0ZRWURWUVFLREE1UGJtVk1iMmRwYml3Z1NXNWpM" +
"akVWTUJNR0ExVUVDd3dNVDI1bFRHOW5hVzRnU1dSUU1Sc3dHUVlEVlFRRERC" +
"SlBibVZNYjJkcGJpQkJZMk52ZFc1MElERXdnZ0VpTUEwR0NTcUdTSWIzRFFF" +
"QkFRVUFBNElCRHdBd2dnRUtBb0lCQVFDKzlENXgxbjhDeVBWKzI2QXREZFVU" +
"RGFLVWFOcUFiblRpbWtmdktzRW02cEg3NG5nQjRqWnFLakptYk5hYzVaYVV0" +
"a0hiZ0lmeTdrWWY1NWxnUUV0UXpQRS9tQzFTTUNCcjM0TlVoL1JVU3V4U0ZT" +
"djdkTEM2aUFpS2VQcG45dFVsdWlpdHExSVdZNThmNzV3dHJYU25Sbjd0c0Er" +
"bEhib0FLUi95elA4MnlBNlNBRUJoV25pcWhGdnV5Rjg5L1JKT2xaL3IvSitU" +
"RU0rRWtBYzJJYVJ2cDVLSi9VUUJOb3Z3ejB2UDIrVHdsTWJHdTdhbSt5Ums2" +
"SHI4K1BUUU1nMG55cHo4T1gzazRLTFVwU3dDSUV1Y245TUZBSkZSZ2JsR1NO" +
"ZVcvU3RocUNOby9jQTJvSUxCQ1FLeTlIS3p5cHBEdTd3dDBPTVFKS3gzNU5l" +
"T0ZFWnhBZ01CQUFHamdkb3dnZGN3REFZRFZSMFRBUUgvQkFJd0FEQWRCZ05W" +
"SFE0RUZnUVVNd0ZWUHZYQTBHSUQ3d1l1SmRSQ21ONEU3QU13Z1pjR0ExVWRJ" +
"d1NCanpDQmpJQVVNd0ZWUHZYQTBHSUQ3d1l1SmRSQ21ONEU3QU9oWHFSY01G" +
"b3hDekFKQmdOVkJBWVRBbFZUTVJjd0ZRWURWUVFLREE1UGJtVk1iMmRwYml3" +
"Z1NXNWpMakVWTUJNR0ExVUVDd3dNVDI1bFRHOW5hVzRnU1dSUU1Sc3dHUVlE" +
"VlFRRERCSlBibVZNYjJkcGJpQkJZMk52ZFc1MElER0NGRkFPYzZxVTUwaGhh" +
"OS8ra3RRMHkrOE55YlRNTUE0R0ExVWREd0VCL3dRRUF3SUhnREFOQmdrcWhr" +
"aUc5dzBCQVFVRkFBT0NBUUVBYW5RR0NQeUh2cGJSMXhYSVg4dEZPOXZqeEQx" +
"VjJ2bFZQbEppUXpQWmxHMWs3Z3dOTC9mNnAxVklPVVVRSFVwWGtoSHAzSm1v" +
"aVJXZ3BETlViczV5cUt4aXVnMFl3QTA4c0c0b3c3eThkekxseW9sVVNTaTdG" +
"TmVFMWJreHNHNC85M2dSRXIvc3lEMjdLdHVPNDJuUGhORysrd3JQSzVITkpR" +
"NzlOR2piZzFaL3NoTmNYOC9hV1ozUnMvK0hPUHg4ZGNMYWFnOEpKcjUrY0JE" +
"Zm1Lc0R1TDlUN2VUK1N6L2pKVW5MalliM2xmL051QldoWlFZU1U5TSt4UU53" +
"Tkx6enlzdEhtTDFyakpuM3FIYUVEZFpBSldrRUR0aXdYS1hDR3hzZzk4amFJ" +
"d1BMb1dGS3cyRVcrZHFHV0dFZFNoUWJOemx1b2NzVnlVNmtBL2ZSd3pRVXZR" +
"PT08L2RzOlg1MDlDZXJ0aWZpY2F0ZT48L2RzOlg1MDlEYXRhPjwvZHM6S2V5" +
"SW5mbz48L2RzOlNpZ25hdHVyZT48c2FtbDpTdWJqZWN0PjxzYW1sOk5hbWVJ" +
"RCBGb3JtYXQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjEuMTpuYW1laWQt" +
"Zm9ybWF0OmVtYWlsQWRkcmVzcyI+cm9nZWxpby5zZXZpbGxhQG9uZWxvZ2lu" +
"LmNvbTwvc2FtbDpOYW1lSUQ+PHNhbWw6U3ViamVjdENvbmZpcm1hdGlvbiBN" +
"ZXRob2Q9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDpjbTpiZWFyZXIi" +
"PjxzYW1sOlN1YmplY3RDb25maXJtYXRpb25EYXRhIE5vdE9uT3JBZnRlcj0i" +
"MjAxMy0xMi0xOVQxNzoyNzowMloiIFJlY2lwaWVudD0iIi8+PC9zYW1sOlN1" +
"YmplY3RDb25maXJtYXRpb24+PC9zYW1sOlN1YmplY3Q+PHNhbWw6Q29uZGl0" +
"aW9ucyBOb3RCZWZvcmU9IjIwMTMtMTItMTlUMTc6MjE6MDJaIiBOb3RPbk9y" +
"QWZ0ZXI9IjIwMTMtMTItMTlUMTc6Mjc6MDJaIj48c2FtbDpBdWRpZW5jZVJl" +
"c3RyaWN0aW9uPjxzYW1sOkF1ZGllbmNlLz48L3NhbWw6QXVkaWVuY2VSZXN0" +
"cmljdGlvbj48L3NhbWw6Q29uZGl0aW9ucz48c2FtbDpBdXRoblN0YXRlbWVu" +
"dCBBdXRobkluc3RhbnQ9IjIwMTMtMTItMTlUMTc6MjQ6MDFaIiBTZXNzaW9u" +
"Tm90T25PckFmdGVyPSIyMDEzLTEyLTIwVDE3OjI0OjAyWiIgU2Vzc2lvbklu" +
"ZGV4PSJfZDBmZmQ0ZjAtNGFmZC0wMTMxLTZlOTYtNzQ2ZDA0NTI4NWNkIj48" +
"c2FtbDpBdXRobkNvbnRleHQ+PHNhbWw6QXV0aG5Db250ZXh0Q2xhc3NSZWY+" +
"dXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFjOmNsYXNzZXM6UGFzc3dv" +
"cmRQcm90ZWN0ZWRUcmFuc3BvcnQ8L3NhbWw6QXV0aG5Db250ZXh0Q2xhc3NS" +
"ZWY+PC9zYW1sOkF1dGhuQ29udGV4dD48L3NhbWw6QXV0aG5TdGF0ZW1lbnQ+" +
"PC9zYW1sOkFzc2VydGlvbj48L3NhbWxwOlJlc3BvbnNlPgoK";
			ts.validateSAML(s);
		}
		catch(Exception e){
		}
	}

	public void validateSAML(String s)
	{
		try{
			String certificateS = "MIIEHTCCAwWgAwIBAgIUUA5zqpTnSGFr3/6S1DTL7w3JtMwwDQYJKoZIhvcNAQEF" +
"BQAwWjELMAkGA1UEBhMCVVMxFzAVBgNVBAoMDk9uZUxvZ2luLCBJbmMuMRUwEwYD" +
"VQQLDAxPbmVMb2dpbiBJZFAxGzAZBgNVBAMMEk9uZUxvZ2luIEFjY291bnQgMTAe" +
"Fw0xMzEyMTgxNzE5MDBaFw0xODEyMTkxNzE5MDBaMFoxCzAJBgNVBAYTAlVTMRcw" +
"FQYDVQQKDA5PbmVMb2dpbiwgSW5jLjEVMBMGA1UECwwMT25lTG9naW4gSWRQMRsw" +
"GQYDVQQDDBJPbmVMb2dpbiBBY2NvdW50IDEwggEiMA0GCSqGSIb3DQEBAQUAA4IB" +
"DwAwggEKAoIBAQC+9D5x1n8CyPV+26AtDdUTDaKUaNqAbnTimkfvKsEm6pH74ngB" +
"4jZqKjJmbNac5ZaUtkHbgIfy7kYf55lgQEtQzPE/mC1SMCBr34NUh/RUSuxSFSv7" +
"dLC6iAiKePpn9tUluiitq1IWY58f75wtrXSnRn7tsA+lHboAKR/yzP82yA6SAEBh" +
"WniqhFvuyF89/RJOlZ/r/J+TEM+EkAc2IaRvp5KJ/UQBNovwz0vP2+TwlMbGu7am" +
"+yRk6Hr8+PTQMg0nypz8OX3k4KLUpSwCIEucn9MFAJFRgblGSNeW/SthqCNo/cA2" +
"oILBCQKy9HKzyppDu7wt0OMQJKx35NeOFEZxAgMBAAGjgdowgdcwDAYDVR0TAQH/" +
"BAIwADAdBgNVHQ4EFgQUMwFVPvXA0GID7wYuJdRCmN4E7AMwgZcGA1UdIwSBjzCB" +
"jIAUMwFVPvXA0GID7wYuJdRCmN4E7AOhXqRcMFoxCzAJBgNVBAYTAlVTMRcwFQYD" +
"VQQKDA5PbmVMb2dpbiwgSW5jLjEVMBMGA1UECwwMT25lTG9naW4gSWRQMRswGQYD" +
"VQQDDBJPbmVMb2dpbiBBY2NvdW50IDGCFFAOc6qU50hha9/+ktQ0y+8NybTMMA4G" +
"A1UdDwEB/wQEAwIHgDANBgkqhkiG9w0BAQUFAAOCAQEAanQGCPyHvpbR1xXIX8tF" +
"O9vjxD1V2vlVPlJiQzPZlG1k7gwNL/f6p1VIOUUQHUpXkhHp3JmoiRWgpDNUbs5y" +
"qKxiug0YwA08sG4ow7y8dzLlyolUSSi7FNeE1bkxsG4/93gREr/syD27KtuO42nP" +
"hNG++wrPK5HNJQ79NGjbg1Z/shNcX8/aWZ3Rs/+HOPx8dcLaag8JJr5+cBDfmKsD" +
"uL9T7eT+Sz/jJUnLjYb3lf/NuBWhZQYSU9M+xQNwNLzzystHmL1rjJn3qHaEDdZA" +
"JWkEDtiwXKXCGxsg98jaIwPLoWFKw2EW+dqGWGEdShQbNzluocsVyU6kA/fRwzQU" +
"vQ==";

			AccountSettings accountSettings = new AccountSettings();
			accountSettings.setCertificate(certificateS);

			Response samlResponse = new Response(accountSettings);
			samlResponse.loadXmlFromBase64(s);

			if (samlResponse.isValid())
			{
				final String nameId = samlResponse.getNameId();
				System.out.println(nameId);
				
				Principal user = null;
				
				user = new User() {
					public String getFullName() {
						return "admin";
					}

					public String getEmail() {
						return nameId;
					}

					public String getName() {
						return "admin";
					}
				};
				
				System.out.println("stop for a minute");
				
				
				
			}
			else
			{
			}
		}
		catch(Exception e){
                    e.printStackTrace();
                    System.out.println(e.getMessage());
                        
		}
	}
}
